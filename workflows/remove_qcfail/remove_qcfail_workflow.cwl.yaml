#!/usr/bin/env cwl-runner

class: Workflow

inputs:
  - id: "#first_bam_path"
    type: File

  - id: "#second_bam_path"
    type: File

  - id: "second_bam_path_reference"
    type: File
    
  - uuid: "#uuid"
    type: string

steps:
  - id: "#remove_qcfail"
    run: {import: remove_qcfail.cwl.yaml}
    inputs:
      - id: "#remove_qcfail.first_bam_path"
        source: "#first_bam_path"

      - id: "#remove_qcfail.second_bam_path"
        source: "#second_bam_path"

      - id: "#remove_qcfail.uuid"
        source: "#uuid"

    outputs:
      - id: "#remove_qcfail.output_bam"

  
  - id: "#picard_collectmultiplemetrics"
    run: {import: picard_collectmultiplemetrics.cwl.yaml}
    inputs:
      - id: "#picard_collectmultiplemetrics.input_bam"
        source: "remove_markduplicates.output_bam"
      - id: "#picard_collectmultiplemetrics.reference"
        source: "second_bam_path_reference"
        
  - id: "#picard_markduplicates"
    run: {import: picard_markduplicates.cwl.yaml}
    inputs:
      - id: "picard_markduplicates.input_bam"
        source: "remove_qcfail.output_bam"
    outputs:
      - id: "picard_markduplicates.output_bam"
        